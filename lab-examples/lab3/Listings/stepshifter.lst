


ARM Macro Assembler    Page 1 


    1 00000000         ;*******************************************************
                       ********
    2 00000000         ; StepShifter
    3 00000000         ; if R0 is set -> shift right
    4 00000000         ; if R0 is cleared -> shift left
    5 00000000         ;*******************************************************
                       ********
    6 00000000         ;CYCLES EQU 0x1312CFF ; 19999999
    7 00000000 40005400 
                       GPIO_PORTB_DIR
                               EQU              0x40005400
    8 00000000 000000F0 
                       IOB     EQU              0xF0        ; 11110000
    9 00000000 400053C0 
                       GPIO_PORTB_OUT
                               EQU              0x400053C0
   10 00000000 4000503C 
                       GPIO_PORTB_IN
                               EQU              0x4000503C
   11 00000000 88888888 
                       shift_r EQU              0x88888888
   12 00000000 11111111 
                       shift_l EQU              0x11111111
   13 00000000         ;*******************************************************
                       ********
   14 00000000         ; Program section
   15 00000000         ;*******************************************************
                       ********
   16 00000000         ;LABEL  DIRECTIVE VALUE  COMMENT
   17 00000000                 AREA             routines, READONLY, CODE
   18 00000000                 THUMB
   19 00000000                 EXPORT           StepShifter ; Make available
   20 00000000         
   21 00000000         StepShifter
                               PROC
   22 00000000 B403            PUSH{R0,R1}
   23 00000002 490D            LDR              R1, = GPIO_PORTB_IN
   24 00000004 480D            LDR              R0, = GPIO_PORTB_OUT
   25 00000006         Detect_IN
   26 00000006 680A            LDR              R2, [R1]
   27 00000008 2A0B            CMP              R2, #0xB
   28 0000000A D00A            BEQ              S_L
   29 0000000C 2A0D            CMP              R2, #0xD
   30 0000000E D000            BEQ              S_R
   31 00000010 D1F9            BNE              Detect_IN
   32 00000012         
   33 00000012         S_R
   34 00000012 F04F 3188       LDR              R1, = shift_r
   35 00000016         S_R_Loop
   36 00000016 7001            STRB             R1, [R0]
   37 00000018 BF00            NOP
   38 0000001A BF00            NOP
   39 0000001C EA4F 0171       ROR              R1, R1, #1
   40 00000020         ;CMP R1, #shift_r
   41 00000020 E7F9            B                S_R_Loop
   42 00000022         ;BNE S_R_Loop
   43 00000022         ;BEQ QUIT
   44 00000022         
   45 00000022         S_L



ARM Macro Assembler    Page 2 


   46 00000022 F04F 3111       LDR              R1, = shift_l
   47 00000026         S_L_Loop
   48 00000026 7001            STRB             R1, [R0]
   49 00000028 BF00            NOP
   50 0000002A BF00            NOP
   51 0000002C EA4F 01F1       ROR              R1, R1, #3
   52 00000030         ;CMP R1, #shift_l
   53 00000030 E7F9            B                S_L_Loop
   54 00000032         ;BNE S_L_Loop
   55 00000032         ;BEQ QUIT
   56 00000032         QUIT
   57 00000032 BC03            POP{R0,R1}
   58 00000034 4770            BX               LR
   59 00000036                 ENDP
   60 00000036         ;*******************************************************
                       ********
   61 00000036         ; End of the program  section
   62 00000036         ;*******************************************************
                       ********
   63 00000036         ;LABEL      DIRECTIVE       VALUE                       
                           COMMENT
   64 00000036 00 00           ALIGN
   65 00000038                 END
              4000503C 
              400053C0 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\stepshifter.d -o.\objects\stepshifter.o -I.\RTE\_q1 -
ID:\Keil_v5\ARM\PACK\Keil\TM4C_DFP\1.1.0\Device\Include\TM4C123 -ID:\Keil_v5\AR
M\CMSIS\Include --predefine="__EVAL SETA 1" --predefine="__UVISION_VERSION SETA
 526" --predefine="TM4C123GH6PM SETA 1" --list=.\listings\stepshifter.lst StepS
hifter.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

Detect_IN 00000006

Symbol: Detect_IN
   Definitions
      At line 25 in file StepShifter.s
   Uses
      At line 31 in file StepShifter.s
Comment: Detect_IN used once
QUIT 00000032

Symbol: QUIT
   Definitions
      At line 56 in file StepShifter.s
   Uses
      None
Comment: QUIT unused
S_L 00000022

Symbol: S_L
   Definitions
      At line 45 in file StepShifter.s
   Uses
      At line 28 in file StepShifter.s
Comment: S_L used once
S_L_Loop 00000026

Symbol: S_L_Loop
   Definitions
      At line 47 in file StepShifter.s
   Uses
      At line 53 in file StepShifter.s
Comment: S_L_Loop used once
S_R 00000012

Symbol: S_R
   Definitions
      At line 33 in file StepShifter.s
   Uses
      At line 30 in file StepShifter.s
Comment: S_R used once
S_R_Loop 00000016

Symbol: S_R_Loop
   Definitions
      At line 35 in file StepShifter.s
   Uses
      At line 41 in file StepShifter.s
Comment: S_R_Loop used once
StepShifter 00000000

Symbol: StepShifter
   Definitions
      At line 21 in file StepShifter.s
   Uses
      At line 19 in file StepShifter.s
Comment: StepShifter used once
routines 00000000

Symbol: routines



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 17 in file StepShifter.s
   Uses
      None
Comment: routines unused
8 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

GPIO_PORTB_DIR 40005400

Symbol: GPIO_PORTB_DIR
   Definitions
      At line 7 in file StepShifter.s
   Uses
      None
Comment: GPIO_PORTB_DIR unused
GPIO_PORTB_IN 4000503C

Symbol: GPIO_PORTB_IN
   Definitions
      At line 10 in file StepShifter.s
   Uses
      At line 23 in file StepShifter.s
Comment: GPIO_PORTB_IN used once
GPIO_PORTB_OUT 400053C0

Symbol: GPIO_PORTB_OUT
   Definitions
      At line 9 in file StepShifter.s
   Uses
      At line 24 in file StepShifter.s
Comment: GPIO_PORTB_OUT used once
IOB 000000F0

Symbol: IOB
   Definitions
      At line 8 in file StepShifter.s
   Uses
      None
Comment: IOB unused
shift_l 11111111

Symbol: shift_l
   Definitions
      At line 12 in file StepShifter.s
   Uses
      At line 46 in file StepShifter.s
Comment: shift_l used once
shift_r 88888888

Symbol: shift_r
   Definitions
      At line 11 in file StepShifter.s
   Uses
      At line 34 in file StepShifter.s
Comment: shift_r used once
6 symbols
350 symbols in table
